{%comment%}Do not edit this file{%endcomment%}
{% raw %}
  {% assign root_url = {% endraw %}"{%- if routes.root_url != "/" -%}{{ routes.root_url }}{%- endif -%}"{% raw %} %}
  {% assign currencyFormat = {% endraw %}{{ shop.money_format | json }}{% raw %} %}
  {% assign swatch_options = '' | downcase | replace: ', ', ',' | split: ","  %}
  {% assign image_options  = '' | downcase | replace: ', ', ',' | split: ","  %}
  {% assign text_options   = '' | downcase | replace: ', ', ',' | split: ","  %}
  {% assign show_selected_variant_info = false %}

  {% assign image_size     = '460x690' %}
  {% assign images_count   = product.images | size %}
  {% assign variants_count = product.variants | size %}
  {% assign options_count  = product.options | size %}
  {% assign no_image = 'https://cdn.shopify.com/s/images/themes/product-1.png' %}

  {% assign featured_image            = product.featured_image %}
  {% assign product_price             = product.price %}
  {% assign product_compare_at_price  = product.compare_at_price %}
  {% assign second_image_index        = 2 %}
  {% assign selected_or_first_available_variant = product.selected_or_first_available_variant %}

  {% if show_selected_variant_info and product.selected_variant %}
    {% assign selected_or_first_available_variant = product.selected_variant %}
    {% assign product_price             = selected_or_first_available_variant.price %}
    {% assign product_compare_at_price  = selected_or_first_available_variant.compare_at_price %}
    {% if selected_or_first_available_variant.image %}
      {% assign featured_image  = selected_or_first_available_variant.image %}
    {% endif %}
    {% for image in product.images %}
      {% if image.id == featured_image.id %}
        {% if forloop.index == images_count %}
          {% assign second_image_index = 1 %}
        {% else %}
          {% assign second_image_index = forloop.index | plus: 1 %}
        {% endif %}
      {% endif %}
    {% endfor %}
  {% endif %}

            {% assign tag_new_limit             = {% endraw %}{{settings.tag_new_limit}}{% raw %} %}
      {% assign tag_sale                  = {% endraw %}{{settings.tag_sale}}{% raw %} %}
      {% assign tag_new                   = {% endraw %}{{settings.tag_new}}{% raw %} %}
      {% assign product_grid_style        = '{% endraw %}{{settings.product_grid_style}}{% raw %}' %}
      {% assign collection_text_alignment = '{% endraw %}{{settings.collection_text_alignment}}{% raw %}' %}

      {% assign on_sale = false %}
      {% if product_compare_at_price > product_price %}{% comment %}--------------------------Juls Change this {% endcomment %}
        {% assign on_sale = true %}
      {% endif %}

      {% assign sold_out = true %}
      {% if product.available %}
        {% assign sold_out = false %}
      {% endif %}

      {% assign new_product = false %}
      {% assign published_date = product.published_at | date: "%s"  %}
      {% assign now_date = 'now' | date: "%s" %}
      {% assign age_in_days = now_date | minus: published_date | divided_by: 60 | divided_by: 60 | divided_by: 12 %}
      {% if age_in_days < tag_new_limit %}
        {% assign new_product = true %}
      {% endif %}

      {% assign sellout_tag = false %}
      {% if sold_out and tag_sale %}
        {% assign sellout_tag = true %}
      {% endif %}

      {% assign new_tag = false %}
      {% if new_product and tag_new %}
        {% assign new_tag = true %}
      {% endif %}

      {% assign sale_tag = false %}
      {% if on_sale and tag_sale %}
        {% assign sale_tag = true %}
      {% endif %}

      {% assign tagged = false %}
      {% if sellout_tag or new_tag or sale_tag %}
        {% assign tagged = true %}
      {% endif %}

 		  {% assign savings = product.compare_at_price | minus: product.price | times: 0.01 %}           
          {% assign savings_calc = product.compare_at_price | divided_by: savings | times: 0.01 %}           
          {% assign savings_percent = 100 | divided_by: savings_calc %}           
          

      {% capture sticker %}
        {% if tagged %}
          {% if sellout_tag %}
            <div translatable class="sticker sticker--sold">{% endraw %}{{ 'products.product.sold_out' | t }}{% raw %}</div>
          {% elsif sale_tag %}
   {% comment %}       
<div translatable class="sticker sticker--sale">{% endraw %}{{ 'products.product.sale' | t }}{% raw %}<br>{{ savings_percent | round }}% off</div>

<div translatable class="sticker sticker--sale">{{ savings_percent | round }}% off</div>
{% endcomment %}
<div translatable class="sticker sticker--sale">SALE</div>

          {% elsif new_tag %}
            <div translatable class="sticker sticker--new">{% endraw %}{{ 'products.product.new' | t }}{% raw %}</div>
          {% endif %}
        {% endif %}
      {% endcapture %}




{%comment%}<div{% if showPageData %} data-page="{{page}}"{% endif %} class="grid__item spf-col-xl-3 spf-col-lg-3 spf-col-md-3 spf-col-sm-3 spf-col-6">{%endcomment%}
<div{% if showPageData %} data-page="{{page}}"{% endif %} class="grid__item ">
<div class="product-grid-item {% if on_sale %} on-sale{% endif %}{% if tagged %} tagged{% endif %}" data-grid-item>
  <div {{ auto_height }}>
    <a href="{{ product.url | within: collection }}" data-grid-link class="lazy-image{% if images_count > 1 %} double__image{% endif %}" style="padding-top:150%; background-image:  url('{{ product.featured_media.preview_image | img_url: '1x1' }}');">
      <img class="lazyload fade-in collection__image__top"
        alt="{{ featured_image.alt | default: product.title  }}"
        data-src="{{ featured_image.src | img_lazyload_url }}"
        data-widths="[180, 360, 540, 720, 900, 1080, 1296, 1512, 1728, 2048, 2450, 2700, 3000, 3350, 3750, 4100, 4480]"
        data-aspectratio="{{  featured_image.aspect_ratio }}"
        data-sizes="auto"/>
      {% if images_count > 1 %}
        <div class="collection__image__bottom lazyload lazypreload" data-bgset="{{ product.images[1].src | img_lazyload_url }}" style=""  role="img" aria-label="{{ product.images[1].alt }}"></div>
      {% endif %}
        <div class="product-grid-item__slide" data-grid-slide></div>
      {{ sticker }}
    </a>
  </div>

  <div class="product__grid__info product__grid__info--{{ settings.product_grid_style }} {{ settings.collection_text_alignment | default: 'text-left' }}">
    <a href="{{ product.url | within: collection | capitalize }}">
      <p class="grid__title">
        {{ product.title }}
      </p>
      <div class="price_wrapper">
        <span class="price{% if on_sale %} on-sale{% endif %}">
          {% if product.price_varies %}From {% endif %}
          {{ product.price | money }}
        </span>
        
        {% if on_sale %}
        <span class="compare-at">
          {{ product.compare_at_price | money }}
        </span>
        
         
        
        
        {% endif %}
        {% if current_variant.unit_price %}
          {% capture unit_price_separator %}
            <span aria-hidden="true">/</span><span class="visually-hidden">{{ 'general.accessibility.unit_price_separator' | t }}&nbsp;</span>
          {% endcapture %}
          {% capture unit_price_base_unit %}
            {% if current_variant.unit_price_measurement.reference_value != 1 %}
              {{ current_variant.unit_price_measurement.reference_value }}
            {% endif %}
            {{ current_variant.unit_price_measurement.reference_unit }}
          {% endcapture %}
          <br>
            <span class="visually-hidden visually-hidden--inline">{{ 'products.product.unit_price_label' | t }}</span>
            <span class="price-per-unit">{{ current_variant.unit_price | money }}{{ unit_price_separator }}{{ unit_price_base_unit }}</span>
        {% endif %}
        {% if product.metafields.spr.reviews %}
          <br />
          <span class="shopify-product-reviews-badge" data-id="{{ product.id }}"></span>
        {% endif %}

        {{ swatches }}
      </div>
      
    </a>
  </div>
  {% if sold_out %}<span class="soldout-tag">Sold Out</span>{% endif %}
</div>
</div>
      {% endraw %}
